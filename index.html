<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Prospero</title>
<!--    <link rel="stylesheet" href="css/main.css">
-->
</head>
<body>
    <ul id="ulist"></ul>
    <input id="filter-slot" style="">

    <script>
        var strings = [
                "Now my charms are all o'erthrown,",
                "And what strength I have's mine own,",
                "Which is most faint: now, 'tis true,",
                "I must be here confined by you,",
                "Or sent to Naples. Let me not,",
                "Since I have my dukedom got",
                "And pardon'd the deceiver, dwell",
                "In this bare island by your spell;",
                "But release me from my bands",
                "With the help of your good hands:,",
                "Gentle breath of yours my sails",
                "Must fill, or else my project fails,",
                "Which was to please. Now I want",
                "Spirits to enforce, art to enchant,",
                "And my ending is despair,",
                "Unless I be relieved by prayer,",
                "Which pierces so that it assaults",
                "Mercy itself and frees all faults.",
                "As you from crimes would pardon'd be,",
                "Let your indulgence set me free."
            ];

        window.onload = function() {
            console.log("load event");
            document.body.setAttribute("style", "background-color:#d7a040;font-size:1.25em");
            document.getElementById("ulist").setAttribute("style","list-style-type: none;");
            document.getElementById("filter-slot").setAttribute("style","background-color:brown; color:white;height:60px;width:400px;font-size:1.75em;margin-left:16px;padding-left:10px");
            // // build list
            for (var i=0; i<strings.length; i++) {
                var list = document.getElementById("ulist");
                var listing = document.createElement("li");
                var listing_text = document.createTextNode(strings[i]);
                listing.appendChild(listing_text);
                list.appendChild(listing);
            };


            //test input string against each string in array
            //and render visible or not accordingly
            var filter = document.getElementById("filter-slot");

            filter.addEventListener('input', function(event) {
                //console.log("got input event");
                //console.log(filter.value);
                siftText(filter.value);
                //var ulist = document.getElementById("ulist");
                //ulist.setAttribute( "style", "color: red");
            });

            function siftText(inputvalue) {
                var re = new RegExp(inputvalue, ['i']);
                var strElements = document.getElementsByTagName("li");

                for(var i=0; i<strElements.length; i++) {
                    if (re.test(strElements[i].textContent))
                        strElements[i].setAttribute("style", "visibility:visible");
                    else strElements[i].setAttribute("style", "visibility:hidden");
                };
            }


        }
    </script>
</body>
</html>